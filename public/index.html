<!DOCTYPE html>
<html>
<head>
	<meta name="generator" content="Hugo 0.121.2">


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="My thoughts and rambles">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <link rel="icon" type="image/png" href="https://moli.github.io//images/favicon.ico">

    
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="https://moli.github.io/images/touch/chrome-touch-icon-192x192.png">

    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

    
    <meta name="msapplication-TileImage" content="https://moli.github.io/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en"/>
    <link rel="stylesheet" href="https://moli.github.io/css/ionicons.min.css"/>
    <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.1.3/material.grey-orange.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://moli.github.io/css/hmdl-style.css"/>



    <title>莫离君的博客</title>
</head>

<body style="background-image: url('/images/background.jpg');">
    <div class="hmdl-body mdl-layout mdl-js-layout has-drawer is-upgraded">        
        <header class="mdl-layout__header mdl-layout__header--transparent mdl-layout__header--scroll">
            <div class="mdl-layout__header-row">
                <div class="mdl-layout-spacer"></div>
                <nav class="mdl-navigation">
                <a class="mdl-navigation__link mdl-color-text--accent" href="/">Home</a>
                <a class="mdl-navigation__link" href="/post/">Articles</a>
                <a class="mdl-navigation__link" href="/project/">Projects</a>
                <a class="mdl-navigation__link" href="/about/">About</a>
                </nav>
            </div>
        </header>
        <div class="mdl-layout__drawer">
            <nav class="mdl-navigation">
            <a class="mdl-navigation__link mdl-color-text--accent" href="/">Home</a>
            <a class="mdl-navigation__link" href="/post/">Articles</a>
            <a class="mdl-navigation__link" href="/project/">Projects</a>
            <a class="mdl-navigation__link" href="/about/">About</a>
            </nav>
        </div>

        <main class="mdl-layout__content">

            <div class="hmdl-frontpage mdl-grid">                
                <div class="hmdl-profile-card mdl-card profile-card mdl-cell mdl-cell--8-col mdl-cell--4-col-desktop">
                    <div class="mdl-card__media mdl-color--white mdl-color-text--grey-600" style="background-image: url('/images/avatar-192x210.png');">
                    </div>                    
                    <div id="fab_ctn" class="mdl-button--fab_flinger-container">

                        <button id="fab_btn" class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--fab mdl-color--accent">
                            <i class="icon ion-android-add mdl-color-text--white" role="presentation"></i>
                            <span class="visuallyhidden">add</span>
                        </button>

                        <div class="mdl-button--fab_flinger-options">
                            <a href=/about>
                                <button id="about" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-color--primary" title="About Me">
                                    <i class="icon ion-person mdl-color-text--white" role="presentation"></i>
                                </button>
                            </a>

                            <a href=/project>
                                <button id="projects" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-color--primary" title="My Projects">
                                    <i class="icon ion-code mdl-color-text--white" role="presentation"></i>
                                </button>
                            </a>

                            <a href="mailto:Firstname@example.com?subject=Hi">
                                <button id="email" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-color--primary" title="Email Me">
                                    <i class="icon ion-email mdl-color-text--white" role="presentation"></i>
                                </button>
                            </a>
                        </div>
                    </div>

                    <div class="hmdl-page-meta mdl-card__supporting-text meta--fill mdl-color-text--grey-600 ">
                        <div>
                            <strong>Firstname Lastname</strong>
                        </div>
                    </div>
                </div>
                
                <div class="mdl-card mdl-cell mdl-cell--8-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" ">
                        <h3><a href="/post/" >Posts</a></h3>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        
                    </div>
                    <div class="hmdl-page-meta mdl-card__supporting-text mdl-color-text--grey-600">
                        <div>
                            <strong><a href=""></a></strong>
                            <span>Jun 18, 2024</span>
                        </div>
                    </div>
                </div>
                
                <div class="mdl-card mdl-cell mdl-cell--12-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" ">
                        <h3><a href="/post/%E6%8A%80%E6%9C%AF/llm/2024-06-18-learn-lang-chain/" >手把手教你认识学会LangChain</a></h3>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        什么是LangChain LangChain: 一个让你的LLM变得更强大的开源框架。LangChain 就是一个 LLM 编程框架，你想开发一个基于 LLM 应用，需要什么组件它都有，直接使用就行；甚至针对常规的应用流程，它利用链(LangChain中Chain的由来)这个概念已经内置标准化方案了。下面我们从新兴的大语言模型（LLM）技术栈的角度来看看为何它的理念这么受欢迎。
LangChain起源 LangChain 的作者是 Harrison Chase，最初是于 2022 年 10 月开源的一个项目，在 GitHub 上获得大量关注之后迅速转变为一家初创公司。2017 年 Harrison Chase 还在哈佛上大学，如今已是硅谷的一家热门初创公司的 CEO，这对他来说是一次重大而迅速的跃迁。Insider 独家报道，人工智能初创公司 LangChain 在种子轮一周后，再次获得红杉领投的 2000 万至 2500 万美元融资，估值达到 2 亿美元。
LangChain六大主要领域 管理和优化prompt。不同的任务使用不同prompt，如何去管理和优化这些prompt是langchain的主要功能之一。 链，初步理解为一个具体任务中不同子任务之间的一个调用。 数据增强的生成，数据增强生成涉及特定类型的链，它首先与外部数据源交互以获取数据用于生成步骤。这方面的例子包括对长篇文字的总结和对特定数据源的提问/回答。 代理，根据不同的指令采取不同的行动，直到整个流程完成为止。 评估，生成式模型是出了名的难以用传统的指标来评估。评估它们的一个新方法是使用语言模型本身来进行评估。LangChain提供了一些提示/链来协助这个工作。 内存：在整个流程中帮我们管理一些中间状态。 总的来说LangChain可以理解为：在一个流程的整个生命周期中，管理和优化prompt，根据prompt使用不同的代理进行不同的动作，在这期间使用内存管理中间的一些状态，然后使用链将不同代理之间进行连接起来，最终形成一个闭环。
LangChain的主要价值组件 组件：用于处理语言模型的抽象概念，以及每个抽象概念的实现集合。无论你是否使用LangChain框架的其他部分，组件都是模块化的，易于使用。
现成的链：用于完成特定高级任务的组件的结构化组合。现成的链使人容易上手。对于更复杂的应用和细微的用例，组件使得定制现有链或建立新链变得容易。
LangChain组件 model I/O：语言模型接口 data connection：与特定任务的数据接口 chains：构建调用序列 agents：给定高级指令，让链选择使用哪些工具 memory：在一个链的运行之间保持应用状态 callbacks：记录并流式传输任何链的中间步骤 indexes：索引指的是结构化文件的方法，以便LLM能够与它们进行最好的交互 数据连接组件data connection LLM应用需要用户特定的数据，这些数据不属于模型的训练集。LangChain通过以下方式提供了加载、转换、存储和查询数据的构建模块：
文档加载器：从许多不同的来源加载文档 文档转换器：分割文档，删除多余的文档等 文本嵌入模型：采取非结构化文本，并把它变成一个浮点数的列表 矢量存储：存储和搜索嵌入式数据 检索器：查询你的数据
data connection整体流程 data connection——文档加载器 python安装包命令：
pip install langchain pip install unstructured pip install jq CSV基本用法 import os from pathlib import Path from langchain.
                    </div>
                    <div class="hmdl-page-meta mdl-card__supporting-text mdl-color-text--grey-600">
                        <div>
                            <strong><a href=""></a></strong>
                            <span>Jun 18, 2024</span>
                        </div>
                    </div>
                </div>
                
                <div class="mdl-card mdl-cell mdl-cell--12-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" ">
                        <h3><a href="/post/%E6%8A%80%E6%9C%AF/llm/2024-06-18-text-to-vec/" >文本向量化</a></h3>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        一、文本向量化 文本向量化：将文本信息表示成能够表达文本语义的向量，是用数值向量来表示文本的语义。
词嵌入(Word Embedding)：一种将文本中的词转换成数字向量的方法，属于文本向量化处理的范畴。
向量嵌入操作面临的挑战包括：
信息丢失：向量表达需要保留信息结构和节点间的联系。 可扩展性：嵌入方法应具有可扩展性，能够处理可变长文本信息。 维数优化：高维数会提高精度，但时间和空间复杂性也被放大。低维度虽然时间、空间复杂度低，但以损失原始信息为代价，因此需要权衡最佳维度的选择。 常见的文本向量和词嵌入方法包括独热模型（One Hot Model），词袋模型（Bag of Words Model）、词频-逆文档频率（TF-IDF）、N元模型（N-Gram）、单词-向量模型（Word2vec）、文档-向量模型（Doc2vec）
二、独热编码 One-hot编码采用N位状态寄存器来对N个状态进行编码，是分类变量作为二进制向量的表述。
首先根据提供的文本构建词典，其中的数字可以视作对应词语的标签信息或者事物的分类信息。
然后基于独热编码表达法，构造一个N维向量，该向量的维度与词典的长度一直，对于给定词语进行向量表达时，其在词典中出现的响应位置的寄存器赋值为1，其余为0示例如下：
三、词袋模型 词袋模型(Bag-of-words model：BOW)假定对于给定文本，忽略单词出现的顺序和语法等因素，将其视为词汇的简单集合，文档中每个单词的出现属于独立关系，不依赖于其它单词。先将句子向量化，句子维度和字典维度一致，第 i 维上的数字代表 ID 为 i 的词语在该句子里出现的频率。
四、词频-逆文档频率模型 TF-IDF（term frequency-inverse document frequency）是数据信息挖掘的常用统计技术。TF(Term Frequency)中文含义是词频，IDF(Inverse Document Frequency)中文含义是逆文本频率指数。
词频统计的是词语在特定文档中出现的频率，而逆文档频率统计的是词语在其他文章中出现的频率，其处理基本逻辑是词语的重要性随着其在特定文档中出现的次数呈现递增趋势，但同时会随着其在语料库中其他文档中出现的频率递减下降 数学表达式如下：
五、N元模型 N-Gram语言模型基本思路是基于给定文本信息，预测下一个最可能出现的词语。N=1称为unigram，表示下一词的出现不依赖于前面的任何词；N=2称为bigram，表示下一词仅依赖前面紧邻的一个词语，依次类推。
六、单词-向量模型 将不可计算、非结构化的词语转化为可计算、结构化的向量。word2vec模型假设不关注词的出现顺序。Word2Vec包含连续词袋模型CBOW（Continues Bag of Words）和Skip-gram模型两种网络结构。训练完成之后，模型可以针对词语和向量建立映射关系，因此可用来表示词语跟词语之间的关系
CBOW模型如下：
                    </div>
                    <div class="hmdl-page-meta mdl-card__supporting-text mdl-color-text--grey-600">
                        <div>
                            <strong><a href=""></a></strong>
                            <span>Jun 18, 2024</span>
                        </div>
                    </div>
                </div>
                
                <div class="mdl-card mdl-cell mdl-cell--12-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" ">
                        <h3><a href="/post/%E6%8A%80%E6%9C%AF/linux/2018-05-25-cron-session-log/" >Session Opened/Closed for User Root by (Uid=0)</a></h3>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        服务器出现大量这种日志使得 /var/ 目录占用磁盘空间巨大：
# tail -f /var/log/auth.log May 25 14:40:01 1204developer CRON[2191]: pam_unix(cron:session): session opened for user www-data by (uid=0) May 25 14:40:01 1204developer CRON[2193]: pam_unix(cron:session): session opened for user www-data by (uid=0) May 25 14:40:01 1204developer CRON[2192]: pam_unix(cron:session): session opened for user www-data by (uid=0) May 25 14:40:01 1204developer CRON[2192]: pam_unix(cron:session): session closed for user www-data May 25 14:40:01 1204developer CRON[2190]: pam_unix(cron:session): session closed for user www-data May 25 14:40:01 1204developer CRON[2191]: pam_unix(cron:session): session closed for user www-data May 25 14:41:01 1204developer CRON[2189]: pam_unix(cron:session): session closed for user smmsp May 25 14:41:01 1204developer CRON[12928]: pam_unix(cron:session): session opened for user www-data by (uid=0) May 25 14:41:02 1204developer CRON[12928]: pam_unix(cron:session): session closed for user www-data May 25 14:41:09 1204developer CRON[2193]: pam_unix(cron:session): session closed for user www-data 解决方案：
                    </div>
                    <div class="hmdl-page-meta mdl-card__supporting-text mdl-color-text--grey-600">
                        <div>
                            <strong><a href=""></a></strong>
                            <span>May 25, 2018</span>
                        </div>
                    </div>
                </div>
                
                <div class="mdl-card mdl-cell mdl-cell--12-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" ">
                        <h3><a href="/post/%E6%8A%80%E6%9C%AF/php/2017-07-17-anonymous-function/" >PHP代码之使用匿名函数</a></h3>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        匿名函数（Anonymous functions），也叫闭包函数（closures），允许 临时创建一个没有指定名称的函数。最经常用作回调函数（callback）参数的值。当然，也有其它应用的情况。
匿名函数目前是通过Closure类来实现的。
闭包函数也可以作为变量的值来使用。PHP 会自动把此种表达式转换成内置类Closure的对象实例。把一个closure对象赋值给一个变量的方式与普通变量赋值的语法是一样的，最后也要加上分号。
闭包可以从父作用域中继承变量。 任何此类变量都应该用use语言结构传递进去。 PHP 7.1起，不能传入此类变量：superglobals、 $this 或者和参数重名。 这些变量都必须在函数或类的头部声明。 从父作用域中继承变量与使用全局变量是不同的。全局变量存在于一个全局的范围，无论当前在执行的是哪个函数。而 闭包的父作用域是定义该闭包的函数（不一定是调用它的函数）。
构建函数或方法内部的代码块 假如我们有一段逻辑，在一个函数或者方法里我们需要格式化数据,但是这个格式化数据的代码片段出现了多次，如果我们直接写可能会想下面这样：
function doSomething(...) { ... // 格式化代码段 ... ... // 格式化代码段[重复的代码] ... } 我相信大多数的人应该不会像上面这么写，可能都会像下面这样：
function doSomething(...) { ... format(...); ... format(...); ... } // 再声明一个格式花代码的函数或方法 function format() { // 格式化代码段 ... } 上面这样的写法没有任何的问题，最小单元化我们的代码片段，但是如果这个format函数或者方法只是doSomething使用呢？我通常会向下面这么写，为什么？因为我认为在这种上下文的环境中format和doSomething的一个子集。
function doSomething() { ... $package = function (...) use (...) {　// 同样use后面的参数也可以传引用 // 格式化代码段 ... }; ... package(...); ... package(...); .
                    </div>
                    <div class="hmdl-page-meta mdl-card__supporting-text mdl-color-text--grey-600">
                        <div>
                            <strong><a href=""></a></strong>
                            <span>Jul 17, 2017</span>
                        </div>
                    </div>
                </div>
                
                <div class="mdl-card mdl-cell mdl-cell--12-col">
                    <div class="mdl-card__media mdl-color-text--grey-50" style=" ">
                        <h3><a href="/post/%E6%8A%80%E6%9C%AF/php/2017-07-17-use-/" >PHP代码之使用引用</a></h3>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        在PHP 中引用的意思是：不同的名字访问同一个变量内容。php的引用（就是在变量或者函数、对象等前面加上&amp;符号）最重要就是删除引用的变量，只是引用的变量访问不了，但是内容并没有销毁。
场景一：遍历一个数组获取新的数据结构 也许你会这样写：
// 申明一个新的数组,组装成你想要的数据 $tmp = []; foreach ($arr as $k =&gt; $v) { // 取出你想要的数据 $tmp[$k]['youwant'] = $v['youwant']; ... // 一系列判断得到你想要的数据 if (...) { $tmp[$k]['youwantbyjudge'] = 'TIGERB'; } ... } // 最后得要你想要的数组$tmp ------------------------------------------------------- // 也许你觉着上面的写法不是很好，那我们下面换种写法 foreach ($arr as $k =&gt; $v) { // 一系列判断得到你想要的数据 if (...) { // 复写值为你想要的 $arr[$k]['youwantbyjudge'] = 'TIGERB' } ... // 干掉你不想要的结构 unset($arr[$k]['youwantdel']); } // 最后我们得到我们的目标数组$arr 接下来我们使用引用值：
foreach ($arr as ＆$v) { // 一系列判断得到你想要的数据 if (.
                    </div>
                    <div class="hmdl-page-meta mdl-card__supporting-text mdl-color-text--grey-600">
                        <div>
                            <strong><a href=""></a></strong>
                            <span>Jul 17, 2017</span>
                        </div>
                    </div>
                </div>

                    
                <nav class="mdl-cell mdl-cell--12-col">
                    <div class="section-spacer"></div>
                    <a href=/post/ title="show more">
                        More
                        <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
                            <i class="material-icons icon ion-android-arrow-forward" role="presentation"></i>
                        </button>
                    </a>
                </nav>

            </div>        
        </main>
        <footer class="mdl-mini-footer">
            <div class="mdl-mini-footer--left-section">                
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="mailto:Firstname@example.com?subject=Hi">
                    <i class="material-icons_lg icon ion-email"></i>
                    <span class="visuallyhidden">Email</span>
                </a>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="https://github.com/firstname_lastname/">
                    <i class="material-icons_lg icon ion-social-github"></i>
                    <span class="visuallyhidden">Github</span>
                </a>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="https://twitter.com/firstname_lastname">
                    <i class="material-icons_lg icon ion-social-twitter "></i>
                    <span class="visuallyhidden">Twitter</span>
                </a>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="https://linkedin.com/in/firstname_lastname/">
                    <i class="material-icons_lg icon ion-social-linkedin "></i>                        
                    <span class="visuallyhidden">LinkedIn</span>
                </a>
                <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-mini-footer--social-btn social-btn" href="https://facebook.com/firstname_lastname/">
                    <i class="material-icons_lg icon ion-social-facebook "></i>                        
                    <span class="visuallyhidden">Facebook</span>
                </a>

            </div>
            <div class="mdl-mini-footer--right-section">
                <span>© 2015 Firstname Lastname</span>
            </div>
        </footer>
        <div class="mdl-layout__obfuscator"></div>
    </div>
    <script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <script src=/js/cardmedia.js></script>
    <script src=/js/fabbutton.js></script>


</body>
</html>

